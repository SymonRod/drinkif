(function(e){function t(t){for(var n,c,r=t[0],i=t[1],l=t[2],d=0,b=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&b.push(s[c][0]),s[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(b.length)b.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},s={app:0},o=[];function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/static/src/vue/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0148":function(e,t,a){},"0518":function(e,t,a){},"0b87":function(e,t,a){},"11ee":function(e,t,a){"use strict";a("0518")},"52fd":function(e,t,a){"use strict";a("0148")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("be3b");var n=a("f2bf");function s(e,t,a,s,o,c){var r=Object(n["y"])("Navbar"),i=Object(n["y"])("router-view");return Object(n["r"])(),Object(n["f"])("div",null,[Object(n["i"])(r),Object(n["i"])(i)])}var o=function(e){return Object(n["u"])("data-v-b61b9636"),e=e(),Object(n["s"])(),e},c={class:"navbar has-background-dark"},r={class:"container"},i={class:"navbar-brand"},l={class:"title mt-3 mb-1 ml-2 has-text-primary"},u=Object(n["h"])("DrinkIf"),d=o((function(){return Object(n["g"])("a",{class:"navbar-item",href:"#"},null,-1)})),b=o((function(){return Object(n["g"])("span",{class:"navbar-burger burger","data-target":"navbarMenu"},[Object(n["g"])("span"),Object(n["g"])("span"),Object(n["g"])("span")],-1)})),p={id:"navbarMenu",class:"navbar-menu has-background-dark"},f={class:"navbar-end"},g={key:0,class:"navbar-item"},h=Object(n["h"])("Yours phrases"),m={class:"navbar-item"},O=Object(n["h"])("Login"),j={key:1,href:"/logout"};function v(e,t,a,s,o,v){var y=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("nav",c,[Object(n["g"])("div",r,[Object(n["g"])("div",i,[Object(n["g"])("p",l,[Object(n["i"])(y,{to:"/"},{default:Object(n["F"])((function(){return[u]})),_:1})]),d,b]),Object(n["g"])("div",p,[Object(n["g"])("div",f,[null!=e.$store.state.user?(Object(n["r"])(),Object(n["f"])("div",g,[Object(n["i"])(y,{to:"/phrases"},{default:Object(n["F"])((function(){return[h]})),_:1})])):Object(n["e"])("",!0),Object(n["g"])("div",m,[null==e.$store.state.user?(Object(n["r"])(),Object(n["d"])(y,{key:0,to:"/login"},{default:Object(n["F"])((function(){return[O]})),_:1})):Object(n["e"])("",!0),null!=e.$store.state.user?(Object(n["r"])(),Object(n["f"])("a",j,"Logout")):Object(n["e"])("",!0)])])])])])}a("fb6a"),a("d3b7"),a("159b");var y={name:"Navbar",props:{},computed:{}};document.addEventListener("DOMContentLoaded",(function(){var e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach((function(e){e.addEventListener("click",(function(){var t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")}))}))}));a("9eda");var k=a("6b0d"),_=a.n(k);const w=_()(y,[["render",v],["__scopeId","data-v-b61b9636"]]);var N=w,S={name:"App",components:{Navbar:N},mounted:function(){this.$store.commit("updateUser",window.user),this.$store.dispatch("getPhrases")}};const x=_()(S,[["render",s]]);var R=x,I=(a("e9c4"),a("33d1"),a("ea98"),a("a434"),a("5502")),M=a("bc3a"),C=a.n(M),J=Object(I["a"])({state:{user:null,doNotRepeat:null!=JSON.parse(localStorage.getItem("doNotRepeat"))&&JSON.parse(localStorage.getItem("doNotRepeat")),current_phrase:null==JSON.parse(localStorage.getItem("current_phrase"))?{phrase_text:"",phrase_id:null}:JSON.parse(localStorage.getItem("current_phrase")),history:[],available:null==JSON.parse(localStorage.getItem("available"))?[]:JSON.parse(localStorage.getItem("available")),min:null==JSON.parse(localStorage.getItem("min"))?0:JSON.parse(localStorage.getItem("min")),max:null==JSON.parse(localStorage.getItem("max"))?100:JSON.parse(localStorage.getItem("max")),phrases:[]},mutations:{increaseCounter:function(e){e.current_phrase++},decreaseCounter:function(e){e.current_phrase--},set_phrase:function(e,t){null!=e.current_phrase&&e.history.push(e.current_phrase),e.current_phrase=t,localStorage.setItem("current_phrase",JSON.stringify(e.current_phrase))},random_phrase:function(e){if(e.doNotRepeat){if(e.available.length<=0)return;var t=Math.ceil(0),a=Math.floor(e.available.length-1),n=Math.floor(Math.random()*(a-t+1)+t),s=e.available.indexOf(e.available.at(n));this.commit("set_phrase",e.available.at(n)),s>-1&&e.available.splice(s,1),localStorage.setItem("available",JSON.stringify(e.available))}else{var o=Math.ceil(e.min),c=Math.floor(e.max),r=Math.floor(Math.random()*(c-o+1)+o);this.commit("set_phrase",e.phrases.at(r))}},updateMax:function(e,t){var a=parseInt(t);a!=e.max&&(isNaN(a)||(e.max=a,localStorage.setItem("max",JSON.stringify(a)),this.commit("updateDoNotRepeat",e.doNotRepeat)),this.commit("set_phrase",{phrase_text:"",phrase_id:null}))},updateMin:function(e,t){var a=parseInt(t);a!=e.min&&(isNaN(a)||(e.min=a,localStorage.setItem("min",JSON.stringify(a)),this.commit("updateDoNotRepeat",e.doNotRepeat)),this.commit("set_phrase",{phrase_text:"",phrase_id:null}))},updateDoNotRepeat:function(e,t){if(e.doNotRepeat=t,localStorage.setItem("doNotRepeat",JSON.stringify(t)),e.doNotRepeat){e.available=[];for(var a=e.max,n=e.min,s=n;s<=a-1;s++)e.available.push(e.phrases.at(s));localStorage.setItem("available",JSON.stringify(e.available))}},updateUser:function(e,t){null!=t&&(e.user=t)},updatePhrases:function(e,t){e.phrases=t}},actions:{getPhrases:function(e){var t=e.commit;C.a.get("/get_phrases").then((function(e){t("updatePhrases",e.data.phrases),t("updateMax",e.data.phrases.length),t("updateMin",0)})).catch((function(e){console.log(e)}))},random_phrase:function(e){var t=e.commit;t("random_phrase")}},modules:{}}),P=a("6c02"),A=a("734e"),$=a.n(A),L=function(e){return Object(n["u"])("data-v-1a5c9ea7"),e=e(),Object(n["s"])(),e},D={class:"hero"},E={class:"container"},F=L((function(){return Object(n["g"])("div",{class:"has-text-centered m-3"},[Object(n["g"])("figure",{alt:"Drunk",class:"image is-128x128 is-inline-block"},[Object(n["g"])("img",{src:$.a,alt:""})])],-1)})),U={class:"title has-text-centered"},q={class:"has-text-centered m-3"},T={class:"has-text-centered m-3"},G={for:"doNotRepeat",class:"has-text-white"},V=Object(n["h"])(" Do not repeat "),B={key:0,class:"message is-primary"},H={class:"message-body"},X=Object(n["h"])(" There are still available "),Y=Object(n["h"])(" phrases. ");function z(e,t,a,s,o,c){return Object(n["r"])(),Object(n["f"])("section",D,[Object(n["g"])("div",E,[Object(n["g"])("div",null,[F,Object(n["g"])("div",U,Object(n["A"])(e.$store.state.current_phrase.phrase_text),1)]),Object(n["g"])("div",q,[Object(n["g"])("button",{onClick:t[0]||(t[0]=function(t){return e.$store.dispatch("random_phrase")}),class:"button is-primary is-outlined"}," New Phrase ")]),Object(n["g"])("div",T,[Object(n["g"])("label",G,[Object(n["G"])(Object(n["g"])("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.doNotRepeat=e}),id:"doNotRepeat"},null,512),[[n["C"],c.doNotRepeat]]),V])]),c.doNotRepeat?(Object(n["r"])(),Object(n["f"])("article",B,[Object(n["g"])("div",H,[Object(n["g"])("p",null,[X,Object(n["g"])("strong",null,Object(n["A"])(e.$store.state.available.length),1),Y])])])):Object(n["e"])("",!0)])])}var K={name:"Home",props:{},mounted:function(){},computed:{doNotRepeat:{get:function(){return this.$store.state.doNotRepeat},set:function(e){this.$store.commit("updateDoNotRepeat",e)}},min:{get:function(){return this.$store.state.min},set:function(e){this.$store.commit("updateMin",e)}},max:{get:function(){return this.$store.state.max},set:function(e){this.$store.commit("updateMax",e)}}}};a("52fd");const Q=_()(K,[["render",z],["__scopeId","data-v-1a5c9ea7"]]);var W=Q,Z={class:"about"},ee=Object(n["g"])("h1",null,"This is an about page",-1),te=[ee];function ae(e,t){return Object(n["r"])(),Object(n["f"])("div",Z,te)}const ne={},se=_()(ne,[["render",ae]]);var oe=se,ce={class:"columns"},re={id:"login-view",class:"column is-half is-offset-one-quarter"},ie={class:"card m-6 p-4"},le=Object(n["g"])("h1",{class:"has-text-black title"},"Login",-1),ue={class:"field"},de={class:"control has-icons-left has-icons-right"},be=Object(n["g"])("span",{class:"icon is-small is-left"},[Object(n["g"])("i",{class:"fas fa-envelope"})],-1),pe=Object(n["g"])("span",{class:"icon is-small is-right"},[Object(n["g"])("i",{class:"fas fa-check"})],-1),fe={class:"field"},ge={class:"control has-icons-left"},he=Object(n["g"])("span",{class:"icon is-small is-left"},[Object(n["g"])("i",{class:"fas fa-lock"})],-1),me={class:"button"},Oe=Object(n["h"])("Create account");function je(e,t,a,s,o,c){var r=Object(n["y"])("router-link");return Object(n["r"])(),Object(n["f"])("div",ce,[Object(n["g"])("div",re,[Object(n["g"])("div",ie,[le,Object(n["g"])("div",ue,[Object(n["g"])("p",de,[Object(n["G"])(Object(n["g"])("input",{class:"input",type:"username",placeholder:"username","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.username=e})},null,512),[[n["D"],o.username]]),be,pe])]),Object(n["g"])("div",fe,[Object(n["g"])("p",ge,[Object(n["G"])(Object(n["g"])("input",{class:"input",type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.password=e})},null,512),[[n["D"],o.password]]),he])]),Object(n["g"])("div",null,[Object(n["g"])("button",{onClick:t[2]||(t[2]=function(e){return c.login()}),id:"login-button",class:"button"},"Login")]),Object(n["g"])("div",me,[Object(n["i"])(r,{to:"/register"},{default:Object(n["F"])((function(){return[Oe]})),_:1})])])])])}a("ac1f"),a("1276");function ve(e){var t="; ".concat(document.cookie),a=t.split("; ".concat(e,"="));if(2===a.length)return a.pop().split(";").shift()}var ye={data:function(){return{username:"",password:""}},methods:{login:function(){var e=ve("csrftoken");console.log(e),C.a.post("/login",{username:this.username,password:this.password},{headers:{"X-CSRFToken":e}}).then((function(e){200===e.status&&(window.location.href="/")}))}}};a("f189");const ke=_()(ye,[["render",je]]);var _e=ke,we={class:"columns"},Ne={id:"login-view",class:"column is-half is-offset-one-quarter"},Se={class:"card m-6 p-4"},xe=Object(n["g"])("h1",{class:"has-text-black title"},"Register",-1),Re={class:"field"},Ie={class:"control has-icons-left has-icons-right"},Me=Object(n["g"])("span",{class:"icon is-small is-left"},[Object(n["g"])("i",{class:"fas fa-envelope"})],-1),Ce=Object(n["g"])("span",{class:"icon is-small is-right"},[Object(n["g"])("i",{class:"fas fa-check"})],-1),Je={class:"field"},Pe={class:"control has-icons-left"},Ae=Object(n["g"])("span",{class:"icon is-small is-left"},[Object(n["g"])("i",{class:"fas fa-lock"})],-1);function $e(e,t,a,s,o,c){return Object(n["r"])(),Object(n["f"])("div",we,[Object(n["g"])("div",Ne,[Object(n["g"])("div",Se,[xe,Object(n["g"])("div",Re,[Object(n["g"])("p",Ie,[Object(n["G"])(Object(n["g"])("input",{class:"input",type:"username",placeholder:"Username","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.username=e})},null,512),[[n["D"],o.username]]),Me,Ce])]),Object(n["g"])("div",Je,[Object(n["g"])("p",Pe,[Object(n["G"])(Object(n["g"])("input",{class:"input",type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.password=e})},null,512),[[n["D"],o.password]]),Ae])]),Object(n["g"])("div",null,[Object(n["g"])("button",{onClick:t[2]||(t[2]=function(t){return c.register(e.inputs)}),id:"register-button",class:"button"},"Register")])])])])}function Le(e){var t="; ".concat(document.cookie),a=t.split("; ".concat(e,"="));if(2===a.length)return a.pop().split(";").shift()}var De={data:function(){return{username:"",password:""}},methods:{register:function(){var e=Le("csrftoken");C.a.post("/register",{username:this.username,password:this.password},{headers:{"X-CSRFToken":e}}).then((function(e){200===e.status&&(window.location.href="/")}))}}};a("11ee");const Ee=_()(De,[["render",$e]]);var Fe=Ee,Ue={class:"columns"},qe={id:"phrases-view",class:"column is-half is-offset-one-quarter"},Te={class:"card m-auto p-4"},Ge=Object(n["g"])("h1",{class:"has-text-black title"},"Add phrases",-1),Ve=Object(n["g"])("p",{class:"has-text-black"},"Add phrases here",-1),Be={class:"m-1"},He=Object(n["g"])("div",{class:"title has-text-white m-3 has-text-centered"}," Yours sentences ",-1),Xe={class:"columns"},Ye={class:"column is-one-third is-offset-one-third"},ze={class:"card m-2 p-3"},Ke={class:"columns"},Qe={class:"column has-text-black"},We=["onClick"],Ze={id:"modal-confirm-delete",class:"modal"},et=Object(n["g"])("div",{class:"modal-background"},null,-1),tt={class:"modal-card"},at=Object(n["g"])("header",{class:"modal-card-head"},[Object(n["g"])("p",{class:"modal-card-title"},"Confirm deltion"),Object(n["g"])("button",{class:"delete","aria-label":"close"})],-1),nt=Object(n["g"])("section",{class:"modal-card-body"}," Are you sure you want to delete this phrase? ",-1),st={class:"modal-card-foot"},ot=Object(n["g"])("button",{class:"button"},"No way!",-1);function ct(e,t,a,s,o,c){return Object(n["r"])(),Object(n["f"])("div",null,[Object(n["g"])("div",Ue,[Object(n["g"])("div",qe,[Object(n["g"])("div",Te,[Ge,Ve,Object(n["G"])(Object(n["g"])("textarea",{class:"textarea",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.phrases=t})},null,512),[[n["D"],e.phrases]]),Object(n["g"])("div",Be,[Object(n["g"])("button",{class:"button is-primary is-outlined",onClick:t[1]||(t[1]=function(e){return c.add_phrases()})}," Add phrases ")])])])]),He,Object(n["g"])("ul",null,[(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["x"])(e.$store.state.phrases.slice().reverse(),(function(e){return Object(n["r"])(),Object(n["f"])("li",{key:e.id,class:""},[Object(n["g"])("div",Xe,[Object(n["g"])("div",Ye,[Object(n["g"])("div",ze,[Object(n["g"])("div",Ke,[Object(n["g"])("div",Qe,Object(n["A"])(e.phrase_text),1),Object(n["g"])("button",{class:"button is-danger is-outlined m-2 js-modal-trigger","data-target":"modal-confirm-delete",onClick:function(t){return c.set_delete_id(e.id)}}," Delete ",8,We)])])])])])})),128))]),Object(n["g"])("div",Ze,[et,Object(n["g"])("div",tt,[at,nt,Object(n["g"])("footer",st,[Object(n["g"])("button",{class:"button is-danger",onClick:t[2]||(t[2]=function(){return c.confirm_delete&&c.confirm_delete.apply(c,arguments)})},"I am sure delete it!"),ot])])])])}var rt=a("4b44");function it(e){var t="; ".concat(document.cookie),a=t.split("; ".concat(e,"="));if(2===a.length)return a.pop().split(";").shift()}var lt={data:function(){return{delete_id:-1}},methods:{confirm_delete:function(){var e=this,t=it("csrftoken");C.a.post("/delete_phrase",{id:this.delete_id},{headers:{"X-CSRFToken":t}}).then((function(){e.$store.dispatch("getPhrases"),Object(rt["toast"])({message:"Sentences deleted!",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:3e3,position:"top-right"})})).catch((function(e){console.log(e)}))},set_delete_id:function(e){function t(e){e.classList.add("is-active")}this.delete_id=e,t(document.getElementById("modal-confirm-delete"))},add_phrases:function(){for(var e=this,t=this.phrases.split(/\r?\n/),a=0;a<t.length;a++){var n=t[a],s=n.split(". ");s.length>1?t[a]=s[1]:t[a]=s[0]}var o=it("csrftoken");C.a.post("/add_phrases",{phrases:t},{headers:{"X-CSRFToken":o}}).then((function(t){200===t.status&&(e.$store.dispatch("getPhrases"),e.phrases="",Object(rt["toast"])({message:"Sentences added!",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:3e3,position:"top-right"}))}))}},mounted:function(){function e(e){e.classList.add("is-active")}function t(e){e.classList.remove("is-active")}function a(){(document.querySelectorAll(".modal")||[]).forEach((function(e){t(e)}))}console.log("Phrases.vue mounted"),(document.querySelectorAll(".js-modal-trigger")||[]).forEach((function(t){var a=t.dataset.target,n=document.getElementById(a);t.addEventListener("click",(function(){e(n)}))})),(document.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button")||[]).forEach((function(e){var a=e.closest(".modal");e.addEventListener("click",(function(){t(a)}))})),document.addEventListener("keydown",(function(e){var t=e||window.event;27===t.keyCode&&a()}))}};const ut=_()(lt,[["render",ct]]);var dt=ut,bt=[{path:"/",name:"Home",component:W},{path:"/about",name:"About",component:oe},{path:"/register",name:"Register",component:Fe},{path:"/login",name:"Login",component:_e},{path:"/phrases",name:"Phrases",component:dt}],pt=Object(P["a"])({history:Object(P["b"])(),routes:bt}),ft=pt,gt=a("9483");Object(gt["a"])("".concat("/static/src/vue/dist/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ht=a("67b0");a("b383"),a("8010"),Object(n["c"])(R).use(ft).use(J).use(ht["a"]).mount("#app")},"6ae3":function(e,t,a){},"734e":function(e,t,a){e.exports=a.p+"img/drunk.png"},8010:function(e,t){},"9eda":function(e,t,a){"use strict";a("6ae3")},b383:function(e,t,a){},be3b:function(e,t){},f189:function(e,t,a){"use strict";a("0b87")}});
//# sourceMappingURL=app.js.map